# Development docker-compose override
# Run with: docker compose -f docker-compose.yml -f docker-compose.dev.yml up

version: '3.8'

services:
  # Development mode for API with hot reload
  api:
    build:
      context: .
      dockerfile: apps/api/Dockerfile.dev
    volumes:
      - ./apps/api:/app/apps/api
      - ./packages:/app/packages
      - /app/node_modules
      - /app/apps/api/node_modules
    environment:
      NODE_ENV: development
    command: pnpm --filter @bullish-clash/api dev

  # Development mode for Web with hot reload
  web:
    build:
      context: .
      dockerfile: apps/web/Dockerfile.dev
    volumes:
      - ./apps/web:/app/apps/web
      - ./packages:/app/packages
      - /app/node_modules
      - /app/apps/web/node_modules
    environment:
      NODE_ENV: development
    command: pnpm --filter @bullish-clash/web dev
